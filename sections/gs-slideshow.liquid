{{ 'swiper-bundle.min.css' | asset_url | stylesheet_tag }}
{{ 'gs-slideshow.css' | asset_url | stylesheet_tag }}
{{ 'video-section.css' | asset_url | stylesheet_tag }}
{{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

<script type="module" src="{{ 'swiper-bundle.min.js' | asset_url }}"></script>
<script type="module" src="{{ 'swiper-bundle.esm.browser.min.js' | asset_url }}"></script>


<!-- Slider main container -->
{% assign speed = section.settings.speed %}


<div class="swiper swiper-carousel">
  <!-- Additional required wrapper -->
  <div class="swiper-wrapper">
    <!-- Slides -->
    {%- for block in section.blocks -%}
      <div
        class="swiper-slide"
        id="Slide-{{ section.id }}-{{ forloop.index }}"
        {{ block.shopify_attributes }}
        role="group"
        aria-roledescription="{{ 'sections.slideshow.slide' | t }}"
        aria-label="{{ forloop.index }} {{ 'general.slider.of' | t }} {{ forloop.length }}"
        tabindex="-1"
        data-index="{{- forloop.index -}}">
        <style>
          #Slide-{{ section.id }}-{{ forloop.index }}.main_slider_image .image::after {
            opacity: {{ block.settings.image_overlay_opacity | divided_by: 100.0 }}
            ;
          }
        </style>
        <div class="main_slider_wrapper">
          <div class="main_slider_image">
            {% if block.settings.video_url != blank %}
              <div class="video">
                <div class="video_container">
                  <deferred-media class="video-section__media deferred-media no-js-hidden gradient global-media-settings" data-media-id="{{ block.settings.video_url.id }}">
                      {%- if block.settings.video_url.type == 'youtube' -%}
                        <iframe src="https://www.youtube.com/embed/{{ block.settings.video_url.id }}?autoplay=1" class="js-youtube" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen title="{{ block.settings.description | escape }}"></iframe>
                      {%- else -%}
                        <iframe src="https://player.vimeo.com/video/{{ block.settings.video_url.id }}" class="js-vimeo" allow="autoplay; encrypted-media" allowfullscreen title="{{ block.settings.description | escape }}"></iframe>
                      {%- endif -%}                    
                  </deferred-media>
                </div>
              </div>
              {% else %}

            <div class="image">
              {%- if block.settings.image -%}
                {%- assign height = block.settings.image.width | divided_by: block.settings.image.aspect_ratio | round -%}
                {{ block.settings.image | image_url: width: 3840 | image_tag: 
                 loading: 'lazy',
                 height: height,
                 sizes: "100vw",
                 class: "desktop_image small-hide",
                 widths: '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840' }}
                {%- if block.settings.mobile-image != blank -%}
                  {{ block.settings.mobile-image | image_url: width: 750 | image_tag: 
                   loading: 'lazy',
                   height: height,
                   sizes: "100vw",
                   class: "mobile_image medium-hide large-up-hide",
                   widths: '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840' }}
                {%- else -%}
                  {{ block.settings.image | image_url: width: 3840 | image_tag: 
                   loading: 'lazy',
                   height: height,
                   sizes: "100vw",
                   class: "desktop_image desktop_image_for_mobile medium-hide large-up-hide",
                   widths: '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840' }}
                {%- endif -%}
              {%- else -%}
                {{ 'lifestyle-2' | placeholder_svg_tag: 'placeholder-svg' }}
              {%- endif -%}
            </div>
          {% endif %}
            
          </div>
          <div class="main_slider_content_box">
            <div class="main_slider_content">
              {% if block.settings.leftsubheading != blank %}
                <div class="main_slider_subheader mobile-view medium-hide large-up-hide item-1">
                  <div class="subheader item_1 mobile-{{ block.settings.mobile_left_subheading_text_alignment }}">{{ block.settings.leftsubheading }}</div>
                </div>
              {% endif %}
              {% if block.settings.heading != blank %}
                <div class="main_slider_header desktop-{{ block.settings.heading_text_alignment }} mobile-{{ block.settings.mobile_heading_text_alignment }} ">{{ block.settings.heading }}</div>
              {% endif %}
              {% if block.settings.leftsubheading != blank or block.settings.rightsubheading != blank %}
                <div class="main_slider_subheader small-hide">
                  {% if block.settings.leftsubheading != blank %}
                    <div class="subheader item_1 desktop-{{ block.settings.left_subheading_text_alignment }} desktop-box-position--{{ block.settings.left_box_position }}">{{ block.settings.leftsubheading }}</div>
                  {% endif %}
                  {% if block.settings.rightsubheading != blank %}
                    <div class="subheader item_2 desktop-{{ block.settings.right_subheading_text_alignment }} desktop-box-position--{{ block.settings.right_box_position }}">{{ block.settings.rightsubheading }}</div>
                  {% endif %}
                </div>
              {% endif %}
              {% if block.settings.link != blank %}
                <div class="main_slider_button desktop-btn-position--{{ block.settings.btn_position }} mobile-btn-position--{{ block.settings.mobile_btn_position }}">
                  <a href="{{ block.settings.link }}" class="btn btn_bg--{{ block.id }}">
                    <img src="{{ block.settings.buttonbgimage | img_url: 'master' }}" alt="Slider Button">
                    <span class="btn_text">{{ block.settings.button_label }}</span>
                  </a>
                </div>
              {% endif %}
              {% if block.settings.rightsubheading != blank %}
                <div class="main_slider_subheader mobile-view medium-hide large-up-hide item-2">
                  <div class="subheader item_2 mobile-{{ block.settings.mobile_right_subheading_text_alignment }}">{{ block.settings.rightsubheading }}</div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {%- endfor -%}
  </div>
  <!-- If we need pagination -->
  <div class="swiper-pagination"></div>

  <!-- If we need navigation buttons -->
  <div class="swiper-button-prev"></div>
  <div class="swiper-button-next"></div>

  <!-- If we need scrollbar -->
  <div class="swiper-scrollbar"></div>
</div>

{% comment %} <script type="module" src="{{ 'gs-slideshow.js' | asset_url }}"></script> {% endcomment %}

<script>

  let mySwiper = new Swiper(".swiper", {
    direction: "vertical",
    effect: "coverflow",
    spaceBetween: 0,
    grabCursor: !0,
    centeredSlides: !0,
    speed: {{ speed }},
    loop: !0,
    loopedSlides: 6,
    slidesPerView: "auto",
    mousewheel: true,
    keyboard: {
        enabled: true,
    },
    coverflowEffect: {
        rotate: 0,
        stretch: '86%',
        depth: '200',
        modifier: 1,
        slideShadows: true,
    },
    on: {
        init(e){
            for (let r = 0; r < e.slides.length; r += 1) {
              const t = e.slides[r],
                    o = e.slides[r].progress,
                    i = Math.abs(o);
                t.style.opacity = i > 2.5 ? 0 : 1;
            }
        },
        progress(e){
            for (let r = 0; r < e.slides.length; r += 1) {
              const t = e.slides[r],
                    o = e.slides[r].progress,
                    i = Math.abs(o);
                    t.style.opacity = i > 2.5 ? 0 : 1;
            }
        }
    }
});

let GSSlideshowParent = document.getElementById('MainContent');
let GSSlideshow = document.querySelector('.gs-slideshow-section');
let GSSlideshowHeight = GSSlideshow.getBoundingClientRect().height;
GSSlideshowParent.style.setProperty('min-height', `${parseInt(GSSlideshowHeight)}px`);

</script>
{%- if request.design_mode -%}
  <script src="{{ 'theme-editor.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

{% schema %}
  {
    "name": "Main Slideshow",
    "tag": "section",
    "class": "section gs-slideshow-section",
    "settings": [
      {
        "type": "header",
        "content": "t:sections.gs-slideshow.settings.accessibility.content"
      }, {
        "type": "text",
        "id": "accessibility_info",
        "label": "t:sections.gs-slideshow.settings.accessibility.label",
        "info": "t:sections.gs-slideshow.settings.accessibility.info",
        "default": "Slideshow about our brand"
      },
      {
        "type":"number",
        "id":"speed",
        "label":"Slider Speed",
        "default":500,
        "info":"Speed in MS"
      }
    ],
    "blocks": [
      {
        "type": "slide",
        "name": "t:sections.gs-slideshow.blocks.slide.name",
        "limit": 6,
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.image.label"
          },
          {
            "type": "image_picker",
            "id": "mobile-image",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.mobileimage.label"
          },
          {
            "type":"header",
            "content":"Video Settings"
          },
          {
            "type": "video_url",
      "id": "video_url",
      "accept": [
        "youtube",
        "vimeo"
      ],
      /*"default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",*/
      "label": "t:sections.video.settings.video_url.label",
      "info": "t:sections.video.settings.video_url.info"
          },
          {
            "type": "text",
            "id": "heading",
            "default": "Image slide",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.heading.label"
          },
          {
            "type": "select",
            "id": "heading_text_alignment",
            "label": "Heading Text Alignment for Desktop",
            "default": "center",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "select",
            "id": "mobile_heading_text_alignment",
            "label": "Heading Text Alignment for Mobile",
            "default": "center",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "textarea",
            "id": "leftsubheading",
            "default": "Tell your brand's story through images",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.leftsubheading.label"
          }, {
            "type": "select",
            "id": "left_subheading_text_alignment",
            "label": "Left Subheadibg Text Alignment for Desktop",
            "default": "left",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "select",
            "id": "mobile_left_subheading_text_alignment",
            "label": "Left Subheadibg Text Alignment for Mobile",
            "default": "center",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "select",
            "id": "left_box_position",
            "label": "Left Content Position",
            "default": "left",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "textarea",
            "id": "rightsubheading",
            "default": "Tell your brand's story through images",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.rightsubheading.label"
          }, {
            "type": "select",
            "id": "right_subheading_text_alignment",
            "label": "Right Subheading Text Alignment for Desktop",
            "default": "right",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "select",
            "id": "mobile_right_subheading_text_alignment",
            "label": "Right Subheading Text Alignment for Mobile",
            "default": "center",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "select",
            "id": "right_box_position",
            "label": "Right Content Position",
            "default": "right",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "text",
            "id": "button_label",
            "default": "Button label",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.button_label.label",
            "info": "t:sections.gs-slideshow.blocks.slide.settings.button_label.info"
          }, {
            "type": "select",
            "id": "btn_position",
            "label": "Button Position for Desktop",
            "default": "right",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "select",
            "id": "mobile_btn_position",
            "label": "Button Position for Mobile",
            "default": "right",
            "options": [
              {
                "value": "left",
                "label": "Left"
              }, {
                "value": "center",
                "label": "Center"
              }, {
                "value": "right",
                "label": "Right"
              }
            ]
          }, {
            "type": "image_picker",
            "id": "buttonbgimage",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.buttonbgimage.label",
            "info": "t:sections.gs-slideshow.blocks.slide.settings.buttonbgimage.info"
          }, {
            "type": "url",
            "id": "link",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.link.label"
          }, {
            "type": "select",
            "id": "box_align",
            "options": [
              {
                "value": "top-left",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__1.label"
              },
              {
                "value": "top-center",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__2.label"
              },
              {
                "value": "top-right",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__3.label"
              },
              {
                "value": "middle-left",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__4.label"
              }, {
                "value": "middle-center",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__5.label"
              }, {
                "value": "middle-right",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__6.label"
              }, {
                "value": "bottom-left",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__7.label"
              }, {
                "value": "bottom-center",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__8.label"
              }, {
                "value": "bottom-right",
                "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.options__9.label"
              }
            ],
            "default": "middle-center",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.box_align.label",
            "info": "t:sections.gs-slideshow.blocks.slide.settings.box_align.info"
          }, {
            "type": "range",
            "id": "image_overlay_opacity",
            "min": 0,
            "max": 100,
            "step": 10,
            "unit": "%",
            "label": "t:sections.gs-slideshow.blocks.slide.settings.image_overlay_opacity.label",
            "default": 0
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Main Slideshow",
        "blocks": [
          {
            "type": "slide"
          }, {
            "type": "slide"
          }
        ]
      }
    ]
  }
{% endschema %}